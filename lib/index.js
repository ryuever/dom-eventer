!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this._name=e,this._subscriptions={},this._recentId=Date.now()}return r(t,[{key:"use",value:function(t){var e=this;return function(){return e[t].apply(e,arguments)}}},{key:"on",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.use("listen").apply(this,e)}},{key:"off",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.use("remove").apply(this,e)}},{key:"once",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.use("listen").apply(this,[].concat(e,[1]))}},{key:"isValidListener",value:function(t){return"function"==typeof t}},{key:"updateHitCount",value:function(t){if(this._subscriptions[t]){var e=this._subscriptions[t],n=e.hit,i=e.limit;this._subscriptions[t].hit+=1,n===i&&this.remove(t)}}},{key:"listen",value:function(t,e,n,i){if(!this.isValidListener(n))throw new TypeError("listener must be a function");var r=e+"."+(this._recentId+1);this._recentId+=1;var o=function(t,e){return function(){e.updateHitCount(t),n.apply(void 0,arguments)}}(r,this);return this._subscriptions[r]={limit:i,hit:0,type:e},t.addEventListener?(t.addEventListener(e,o,!1),this._subscriptions[r].remove=function(){t.removeEventListener(e,o,!1)}):t.attachEvent&&(t.attachEvent("on"+e,o),this._subscriptions[r].remove=function(){t.detachEvent("on"+e,o)}),r}},{key:"remove",value:function(t){this._subscriptions[t]&&(this._subscriptions[t].remove(),this._subscriptions[t].isRemove=!0)}},{key:"removeAll",value:function(){var t=this;Object.keys(this._subscriptions).forEach(function(e){t.remove(e)})}}]),t}();e.default=o}])});